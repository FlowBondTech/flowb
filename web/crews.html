<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FlowB Crews - Coordinate Your EthDenver Squad</title>
  <meta name="description" content="Form crews, check in together, and climb the leaderboard at EthDenver 2026. Coordinate your squad across Telegram and Farcaster.">
  <meta property="og:title" content="FlowB Crews - Coordinate Your EthDenver Squad">
  <meta property="og:description" content="Form crews, check in together, and climb the leaderboard at EthDenver 2026.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://crews.flowb.me">
  <meta property="og:image" content="https://flowb.me/flowb.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="FlowB Crews - Coordinate Your EthDenver Squad">
  <meta name="twitter:description" content="Form crews, check in together, and climb the leaderboard at EthDenver 2026.">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="shortcut icon" href="favicon.ico">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #050508;
      --bg-card: #0f0f14;
      --bg-card-hover: #16161d;
      --bg-surface: #0a0a0f;
      --border: #1e1e2a;
      --border-hover: #2a2a3a;
      --text: #e8e8f0;
      --text-muted: #8888a0;
      --text-dim: #555568;
      --accent: #2563eb;
      --accent-light: #3b82f6;
      --accent-glow: rgba(37, 99, 235, 0.15);
      --green: #22c55e;
      --green-dim: rgba(34, 197, 94, 0.12);
      --purple: #a855f7;
      --purple-dim: rgba(168, 85, 247, 0.12);
      --orange: #f97316;
      --radius: 12px;
      --radius-sm: 8px;
      --radius-pill: 100px;
      --font: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      --shadow: 0 2px 8px rgba(0,0,0,0.4);
      --shadow-lg: 0 8px 32px rgba(0,0,0,0.5);
    }

    html {
      font-size: 16px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--font);
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.5;
    }

    a { color: var(--accent-light); text-decoration: none; }
    a:hover { text-decoration: underline; }

    .container { max-width: 960px; margin: 0 auto; padding: 0 20px; }

    /* ===== Nav Bar ===== */
    .nav {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(5, 5, 8, 0.88);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border-bottom: 1px solid var(--border);
    }

    .nav-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 56px;
    }

    .nav-logo {
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--text);
      font-weight: 700;
      font-size: 1.1rem;
      text-decoration: none;
    }

    .nav-logo:hover { text-decoration: none; }

    .nav-logo img {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      object-fit: cover;
    }

    .nav-badge {
      font-size: 0.65rem;
      font-weight: 600;
      padding: 3px 8px;
      border-radius: var(--radius-pill);
      background: var(--accent-glow);
      color: var(--accent-light);
      border: 1px solid rgba(37, 99, 235, 0.2);
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .nav-link {
      font-size: 0.82rem;
      font-weight: 500;
      color: var(--text-muted);
      padding: 6px 12px;
      border-radius: var(--radius-sm);
      transition: color 0.2s, background 0.2s;
      text-decoration: none;
    }

    .nav-link:hover {
      color: var(--text);
      background: rgba(255,255,255,0.05);
      text-decoration: none;
    }

    /* ===== Hero ===== */
    .hero {
      padding: 72px 0 48px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: -120px;
      left: 50%;
      transform: translateX(-50%);
      width: 600px;
      height: 400px;
      background: radial-gradient(ellipse, rgba(37, 99, 235, 0.08) 0%, rgba(168, 85, 247, 0.04) 40%, transparent 70%);
      pointer-events: none;
    }

    .hero-emoji {
      font-size: 3rem;
      margin-bottom: 16px;
      display: block;
    }

    .hero h1 {
      font-size: 2.8rem;
      font-weight: 800;
      letter-spacing: -0.03em;
      line-height: 1.1;
      margin-bottom: 16px;
    }

    .gradient-text {
      background: linear-gradient(135deg, var(--accent-light), var(--purple), #ec4899);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .hero-sub {
      font-size: 1.1rem;
      color: var(--text-muted);
      max-width: 520px;
      margin: 0 auto 40px;
      line-height: 1.6;
    }

    /* ===== Stats Bar ===== */
    .stats-bar {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 32px;
      padding: 20px 0;
      margin-bottom: 8px;
    }

    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
    }

    .stat-val {
      font-size: 1.6rem;
      font-weight: 800;
      color: var(--text);
      font-variant-numeric: tabular-nums;
    }

    .stat-val.accent { color: var(--accent-light); }
    .stat-val.green { color: var(--green); }
    .stat-val.purple { color: var(--purple); }

    .stat-label {
      font-size: 0.7rem;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 0.06em;
      font-weight: 500;
    }

    .stat-sep {
      width: 1px;
      height: 36px;
      background: var(--border);
    }

    /* ===== Leaderboard Section ===== */
    .section {
      padding: 48px 0;
    }

    .section-header {
      text-align: center;
      margin-bottom: 32px;
    }

    .section-title {
      font-size: 1.6rem;
      font-weight: 800;
      letter-spacing: -0.02em;
      margin-bottom: 8px;
    }

    .section-subtitle {
      font-size: 0.95rem;
      color: var(--text-muted);
    }

    .leaderboard {
      max-width: 640px;
      margin: 0 auto;
    }

    .lb-loading {
      text-align: center;
      padding: 40px 20px;
      color: var(--text-dim);
      font-size: 0.9rem;
    }

    .lb-loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid var(--border);
      border-top-color: var(--accent-light);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-right: 8px;
      vertical-align: middle;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .lb-empty {
      text-align: center;
      padding: 48px 20px;
      color: var(--text-muted);
      font-size: 0.95rem;
    }

    .lb-empty-icon {
      font-size: 2rem;
      margin-bottom: 12px;
      display: block;
    }

    .lb-row {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px 18px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      margin-bottom: 8px;
      transition: border-color 0.2s, background 0.2s;
    }

    .lb-row:hover {
      border-color: var(--border-hover);
      background: var(--bg-card-hover);
    }

    .lb-row.top-1 { border-color: rgba(251, 191, 36, 0.3); }
    .lb-row.top-2 { border-color: rgba(148, 163, 184, 0.25); }
    .lb-row.top-3 { border-color: rgba(205, 127, 50, 0.25); }

    .lb-rank {
      font-size: 0.82rem;
      font-weight: 700;
      color: var(--text-dim);
      min-width: 24px;
      text-align: center;
    }

    .lb-rank.gold { color: #fbbf24; }
    .lb-rank.silver { color: #94a3b8; }
    .lb-rank.bronze { color: #cd7f32; }

    .lb-emoji {
      font-size: 1.4rem;
      min-width: 28px;
      text-align: center;
    }

    .lb-info {
      flex: 1;
      min-width: 0;
    }

    .lb-name {
      font-size: 0.92rem;
      font-weight: 600;
      color: var(--text);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .lb-members {
      font-size: 0.72rem;
      color: var(--text-dim);
      margin-top: 1px;
    }

    .lb-pts {
      font-size: 0.82rem;
      font-weight: 700;
      color: var(--accent-light);
      background: var(--accent-glow);
      padding: 4px 10px;
      border-radius: var(--radius-pill);
      white-space: nowrap;
    }

    /* ===== Features Grid ===== */
    .features-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }

    .feature-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 28px 22px;
      transition: border-color 0.2s, transform 0.2s;
    }

    .feature-card:hover {
      border-color: var(--border-hover);
      transform: translateY(-2px);
    }

    .feature-icon {
      font-size: 1.8rem;
      margin-bottom: 14px;
      display: block;
    }

    .feature-title {
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--text);
    }

    .feature-desc {
      font-size: 0.85rem;
      color: var(--text-muted);
      line-height: 1.55;
    }

    /* ===== CTA Section ===== */
    .cta-section {
      padding: 64px 0 80px;
      text-align: center;
    }

    .cta-box {
      max-width: 540px;
      margin: 0 auto;
      padding: 40px 32px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 16px;
      position: relative;
      overflow: hidden;
    }

    .cta-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--accent), var(--purple), var(--green));
    }

    .cta-title {
      font-size: 1.5rem;
      font-weight: 800;
      margin-bottom: 8px;
    }

    .cta-desc {
      font-size: 0.95rem;
      color: var(--text-muted);
      margin-bottom: 28px;
      line-height: 1.6;
    }

    .cta-buttons {
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
    }

    .cta-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 28px;
      border-radius: var(--radius-pill);
      font-size: 0.92rem;
      font-weight: 600;
      font-family: var(--font);
      cursor: pointer;
      border: none;
      transition: transform 0.15s, box-shadow 0.2s, background 0.2s;
      text-decoration: none;
      width: 280px;
    }

    .cta-btn:hover {
      transform: translateY(-1px);
      text-decoration: none;
    }

    .cta-btn svg {
      width: 18px;
      height: 18px;
      flex-shrink: 0;
    }

    .cta-btn-telegram {
      background: #2AABEE;
      color: #fff;
      box-shadow: 0 4px 16px rgba(42, 171, 238, 0.25);
    }
    .cta-btn-telegram:hover {
      background: #1E9AD6;
      box-shadow: 0 6px 24px rgba(42, 171, 238, 0.35);
    }

    .cta-btn-farcaster {
      background: #8B5CF6;
      color: #fff;
      box-shadow: 0 4px 16px rgba(139, 92, 246, 0.25);
    }
    .cta-btn-farcaster:hover {
      background: #7C3AED;
      box-shadow: 0 6px 24px rgba(139, 92, 246, 0.35);
    }

    .cta-btn-site {
      background: transparent;
      color: var(--text-muted);
      border: 1px solid var(--border);
    }
    .cta-btn-site:hover {
      color: var(--text);
      border-color: var(--border-hover);
      background: rgba(255,255,255,0.03);
    }

    /* ===== Footer ===== */
    .footer {
      border-top: 1px solid var(--border);
      padding: 20px 0;
    }

    .footer-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 0.8rem;
      color: var(--text-dim);
    }

    .footer-left {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .footer-left img {
      width: 20px;
      height: 20px;
      border-radius: 5px;
    }

    .footer-right {
      display: flex;
      gap: 20px;
    }

    .footer-link {
      color: var(--text-dim);
      font-size: 0.78rem;
      transition: color 0.2s;
    }
    .footer-link:hover {
      color: var(--text-muted);
      text-decoration: none;
    }

    /* ===== Responsive ===== */
    @media (max-width: 768px) {
      .hero { padding: 48px 0 32px; }
      .hero h1 { font-size: 2rem; }
      .hero-sub { font-size: 1rem; }
      .features-grid { grid-template-columns: repeat(2, 1fr); }
      .stats-bar { gap: 20px; }
      .stat-val { font-size: 1.3rem; }
      .section { padding: 36px 0; }
      .nav-links { display: none; }
    }

    @media (max-width: 480px) {
      .container { padding: 0 16px; }
      .hero { padding: 36px 0 24px; }
      .hero h1 { font-size: 1.65rem; }
      .hero-sub { font-size: 0.92rem; margin-bottom: 28px; }
      .features-grid { grid-template-columns: 1fr; gap: 12px; }
      .feature-card { padding: 22px 18px; }
      .stats-bar { gap: 16px; flex-wrap: wrap; }
      .stat-val { font-size: 1.2rem; }
      .stat-label { font-size: 0.65rem; }
      .section-title { font-size: 1.3rem; }
      .lb-row { padding: 12px 14px; gap: 10px; }
      .lb-emoji { font-size: 1.2rem; min-width: 24px; }
      .lb-name { font-size: 0.85rem; }
      .cta-box { padding: 32px 20px; }
      .cta-btn { width: 100%; }
      .footer-inner { flex-direction: column; gap: 12px; text-align: center; }
      .footer-right { gap: 16px; }
    }
  </style>
</head>
<body>

  <!-- Nav -->
  <nav class="nav">
    <div class="container nav-inner">
      <a href="https://flowb.me" class="nav-logo">
        <img src="flowb.png" alt="FlowB">
        <span>FlowB Crews</span>
      </a>
      <div class="nav-links">
        <a href="https://flowb.me" class="nav-link">Events</a>
        <a href="https://flowb.me/leaderboard" class="nav-link">Leaderboard</a>
        <a href="https://flowb.me/about" class="nav-link">About</a>
      </div>
      <span class="nav-badge">EthDenver 2026</span>
    </div>
  </nav>

  <!-- Hero -->
  <section class="hero">
    <div class="container">
      <span class="hero-emoji" aria-hidden="true">&#x1F46B;</span>
      <h1>FlowB <span class="gradient-text">Crews</span></h1>
      <p class="hero-sub">Coordinate your squad at EthDenver. Form a crew, check in together, complete missions, and climb the leaderboard.</p>

      <!-- Live Stats -->
      <div class="stats-bar" id="statsBar">
        <div class="stat-item">
          <span class="stat-val accent" id="statCrews">--</span>
          <span class="stat-label">Crews Active</span>
        </div>
        <div class="stat-sep"></div>
        <div class="stat-item">
          <span class="stat-val purple" id="statPoints">--</span>
          <span class="stat-label">Total Points</span>
        </div>
        <div class="stat-sep"></div>
        <div class="stat-item">
          <span class="stat-val green" id="statCheckins">--</span>
          <span class="stat-label">Check-ins Today</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Crew Leaderboard -->
  <section class="section" id="leaderboard">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Crew Leaderboard</h2>
        <p class="section-subtitle">Top crews at EthDenver right now</p>
      </div>
      <div class="leaderboard" id="leaderboardList">
        <div class="lb-loading">
          <span class="lb-loading-spinner"></span>
          Loading crews...
        </div>
      </div>
    </div>
  </section>

  <!-- Features -->
  <section class="section" id="features">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">What Crews Can Do</h2>
        <p class="section-subtitle">Everything you need to coordinate your EthDenver squad</p>
      </div>
      <div class="features-grid">
        <div class="feature-card">
          <span class="feature-icon" aria-hidden="true">&#x1F4CD;</span>
          <h3 class="feature-title">Check In Together</h3>
          <p class="feature-desc">Share where you are with your crew. When the whole squad checks in at the same event, everyone earns bonus points.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon" aria-hidden="true">&#x1F3AF;</span>
          <h3 class="feature-title">Crew Missions</h3>
          <p class="feature-desc">Complete missions together for bonus points. Hit 3 events in a day, attend a hackathon, or explore a new venue as a crew.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon" aria-hidden="true">&#x1F4AC;</span>
          <h3 class="feature-title">Crew Chat</h3>
          <p class="feature-desc">Message your crew in real-time. Coordinate plans, share event tips, and decide where to go next without leaving the app.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon" aria-hidden="true">&#x1F4E1;</span>
          <h3 class="feature-title">Find My Crew</h3>
          <p class="feature-desc">Ping your crew to see where everyone is. No more lost friends in the Denver convention center maze.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon" aria-hidden="true">&#x1F3C6;</span>
          <h3 class="feature-title">Crew Leaderboard</h3>
          <p class="feature-desc">Compete with other crews for the top spot. Earn points from check-ins, missions, and social actions to climb the ranks.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon" aria-hidden="true">&#x1F4F1;</span>
          <h3 class="feature-title">QR Check-ins</h3>
          <p class="feature-desc">Scan QR codes at venues for instant check-in. Fast, verified, and earns your whole crew points automatically.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="cta-section" id="join">
    <div class="container">
      <div class="cta-box">
        <h2 class="cta-title">Join a Crew</h2>
        <p class="cta-desc">Get started on Telegram or Farcaster. Create your crew or join an existing one in seconds.</p>
        <div class="cta-buttons">
          <a href="https://t.me/Flow_b_bot?start=crew" target="_blank" rel="noopener" class="cta-btn cta-btn-telegram">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>
            Open in Telegram
          </a>
          <a href="https://fc.flowb.me" target="_blank" rel="noopener" class="cta-btn cta-btn-farcaster">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M3.72 2.4h16.56v1.44H22.2v2.88h-1.08v12.24h.36a.36.36 0 0 1 .36.36v.72h-4.68v-.72a.36.36 0 0 1 .36-.36h.36v-5.52c-.12-1.8-1.2-3.24-3.24-3.24s-3.12 1.44-3.24 3.24v5.52h.36a.36.36 0 0 1 .36.36v.72H7.44v-.72a.36.36 0 0 1 .36-.36h.36V6.72H7.08V3.84H5.64V2.4H3.72z"/></svg>
            Open on Farcaster
          </a>
          <a href="https://flowb.me" class="cta-btn cta-btn-site">
            Back to flowb.me
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container footer-inner">
      <div class="footer-left">
        <img src="flowb.png" alt="FlowB">
        <span>FlowB</span>
      </div>
      <div class="footer-right">
        <a href="https://t.me/Flow_b_bot" target="_blank" rel="noopener" class="footer-link">Telegram Bot</a>
        <a href="https://farcaster.xyz/miniapps/oCHuaUqL5dRT/flowb" target="_blank" rel="noopener" class="footer-link">Farcaster</a>
        <a href="https://flowb.me" class="footer-link">flowb.me</a>
      </div>
    </div>
  </footer>

  <script>
    (function() {
      'use strict';

      var FLOWB_API = 'https://flowb.fly.dev';

      // --- Utility ---
      function escapeHtml(s) {
        if (!s) return '';
        return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
      }

      function formatNumber(n) {
        if (n >= 100000) return (n / 1000).toFixed(0) + 'k';
        if (n >= 10000) return (n / 1000).toFixed(1) + 'k';
        if (n >= 1000) return (n / 1000).toFixed(1) + 'k';
        return String(n);
      }

      // --- Animated Counter ---
      function animateCounter(el, target, duration) {
        if (!el || target <= 0) {
          if (el) el.textContent = target <= 0 ? '0' : String(target);
          return;
        }
        var start = 0;
        var startTime = null;

        function step(timestamp) {
          if (!startTime) startTime = timestamp;
          var progress = Math.min((timestamp - startTime) / duration, 1);
          // Ease-out cubic
          var eased = 1 - Math.pow(1 - progress, 3);
          var current = Math.round(start + (target - start) * eased);
          el.textContent = formatNumber(current);
          if (progress < 1) {
            requestAnimationFrame(step);
          } else {
            el.textContent = formatNumber(target);
          }
        }
        requestAnimationFrame(step);
      }

      // --- Fetch Stats ---
      function loadStats() {
        fetch(FLOWB_API + '/api/v1/stats')
          .then(function(res) {
            if (!res.ok) throw new Error('Stats fetch failed');
            return res.json();
          })
          .then(function(stats) {
            var crewsEl = document.getElementById('statCrews');
            var pointsEl = document.getElementById('statPoints');
            var checkinsEl = document.getElementById('statCheckins');

            animateCounter(crewsEl, stats.crewsActive || 0, 1200);
            animateCounter(pointsEl, stats.totalPoints || 0, 1600);
            animateCounter(checkinsEl, stats.checkinsToday || 0, 1000);
          })
          .catch(function() {
            var ids = ['statCrews', 'statPoints', 'statCheckins'];
            ids.forEach(function(id) {
              var el = document.getElementById(id);
              if (el) el.textContent = '0';
            });
          });
      }

      // --- Fetch Leaderboard ---
      function loadLeaderboard() {
        var container = document.getElementById('leaderboardList');

        fetch(FLOWB_API + '/api/v1/flow/leaderboard')
          .then(function(res) {
            if (!res.ok) throw new Error('Leaderboard fetch failed');
            return res.json();
          })
          .then(function(data) {
            var crews = data.crews || [];

            if (!crews.length) {
              container.innerHTML =
                '<div class="lb-empty">' +
                  '<span class="lb-empty-icon">&#x1F680;</span>' +
                  'No public crews yet â€” be the first!<br>' +
                  '<a href="https://t.me/Flow_b_bot?start=crew" target="_blank" rel="noopener">Create a crew on Telegram</a>' +
                '</div>';
              return;
            }

            var html = '';
            crews.forEach(function(crew, i) {
              var rank = i + 1;
              var rankClass = '';
              var rowClass = '';
              if (rank === 1) { rankClass = ' gold'; rowClass = ' top-1'; }
              else if (rank === 2) { rankClass = ' silver'; rowClass = ' top-2'; }
              else if (rank === 3) { rankClass = ' bronze'; rowClass = ' top-3'; }

              html +=
                '<div class="lb-row' + rowClass + '">' +
                  '<span class="lb-rank' + rankClass + '">' + rank + '</span>' +
                  '<span class="lb-emoji">' + (crew.emoji || '&#x1F465;') + '</span>' +
                  '<div class="lb-info">' +
                    '<div class="lb-name">' + escapeHtml(crew.name) + '</div>' +
                    (crew.memberCount ? '<div class="lb-members">' + crew.memberCount + ' member' + (crew.memberCount !== 1 ? 's' : '') + '</div>' : '') +
                  '</div>' +
                  '<span class="lb-pts">' + formatNumber(crew.totalPoints || 0) + ' pts</span>' +
                '</div>';
            });

            container.innerHTML = html;
          })
          .catch(function() {
            container.innerHTML =
              '<div class="lb-empty">' +
                '<span class="lb-empty-icon">&#x26A0;&#xFE0F;</span>' +
                'Could not load leaderboard. Try refreshing.' +
              '</div>';
          });
      }

      // --- Init ---
      loadStats();
      loadLeaderboard();
    })();
  </script>
</body>
</html>
